<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoomerZion.ai - Coastal Ancestral Retreats</title>
    <style>
        body {
            font-family: 'Playfair Display', serif;
            margin: 0;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            overflow-x: hidden;
        }
        header {
            text-align: center;
            padding: 60px 20px;
            background: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') no-repeat center/cover;
            background-blend-mode: overlay;
            background-color: rgba(0, 0, 0, 0.5);
        }
        header h1 {
            font-size: 3.5em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        header p {
            font-size: 1.3em;
            max-width: 600px;
            margin: 10px auto;
            font-style: italic;
        }
        section, form {
            max-width: 700px;
            margin: 30px auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            color: #333;
        }
        input, select, button, textarea {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
        }
        button {
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }
        button:hover {
            transform: scale(1.05);
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        #results {
            display: none;
            margin: 30px auto;
            max-width: 700px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
        }
        .match {
            background: linear-gradient(to right, #e0f7fa, #b2ebf2);
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1em;
        }
        #grok-response, #ancestry-data {
            background: #e6f3fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        #opendoor-section {
            background: linear-gradient(to right, #d4edda, #c3e6cb);
        }
        a {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
        a:hover {
            text-decoration: underline;
        }
        .wave {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            background: url('https://svgshare.com/i/12z9.svg');
            background-size: cover;
            z-index: -1;
            animation: wave 10s infinite linear;
        }
        @keyframes wave {
            0% { background-position: 0 0; }
            100% { background-position: 1000px 0; }
        }
        @media (max-width: 600px) {
            header h1 { font-size: 2.5em; }
            section, form, #results { margin: 20px 10px; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="wave"></div>
    <header>
        <h1>BoomerZion.ai: Your Coastal Ancestral Escape</h1>
        <p>Discover affordable beachfront havens near airports in your ancestral lands, powered by Grok AI, 23andMe, and Opendoor.</p>
    </header>
    
    <!-- 23andMe Onboarding Section -->
    <section id="onboarding">
        <h2>Find Your Coastal Roots</h2>
        <p>Connect your 23andMe account to uncover your heritage and find stunning coastal properties near airports in your ancestral lands. Or enter manually!</p>
        <button id="connect23andMe" onclick="connect23andMe()">Connect 23andMe</button>
        <div id="ancestry-loading" style="display:none;">Sailing to 23andMe...</div>
        <div id="ancestry-data"></div>
        <button id="skipToForm" onclick="showMainForm()" style="background: linear-gradient(to right, #6dd5fa, #2980b9);">Skip to Manual Search</button>
    </section>
    
    <!-- API Key Section -->
    <div id="api-key-section" style="display:none;">
        <h3>Unlock Grok AI</h3>
        <p>Enter your xAI API key for tailored coastal recommendations (<a href="https://x.ai/api" target="_blank">get yours</a>).</p>
        <label for="apiKey">Grok API Key:</label>
        <input type="password" id="apiKey" placeholder="xai-...">
        <button onclick="setApiKey()">Save Key</button>
    </div>
    
    <!-- Main Form -->
    <form id="matchForm" style="display:none;">
        <h2>Your Coastal Ancestral Quest</h2>
        <label for="age">Age:</label>
        <input type="number" id="age" min="65" required>
        
        <label for="netWorth">Estimated Net Worth (USD):</label>
        <input type="number" id="netWorth" min="500000" required>
        
        <label for="ancestry">Ancestral Country (Auto-filled if connected):</label>
        <select id="ancestry" required>
            <option value="">Select or Auto-Detect...</option>
            <option value="italy">Italy</option>
            <option value="ireland">Ireland</option>
            <option value="mexico">Mexico</option>
            <option value="greece">Greece</option>
            <option value="portugal">Portugal</option>
            <option value="other">Other</option>
        </select>
        
        <label for="preferences">Coastal Preferences:</label>
        <textarea id="preferences" placeholder="E.g., Beachfront, near airport, quiet, budget-friendly..."></textarea>
        
        <button type="submit">Discover Coastal Matches</button>
    </form>
    
    <!-- Opendoor Section -->
    <section id="opendoor-section">
        <h2>Sell & Sail: Opendoor Cash Offers</h2>
        <p>Sell your U.S. home fast with Opendoor to fund your coastal ancestral dream!</p>
        <label for="address">Your U.S. Property Address:</label>
        <input type="text" id="address" placeholder="123 Main St, Anytown, CA 12345">
        <button onclick="getOpendoorOffer()">Get Instant Cash Offer</button>
        <div id="opendoor-results"></div>
    </section>
    
    <!-- Results -->
    <div id="results">
        <h2>Your Coastal Ancestral Matches</h2>
        <div id="matches"></div>
        <div id="grok-response"></div>
    </div>
    
    <script>
        let apiKey = localStorage.getItem('grokApiKey') || '';
        let ancestryData = {};
        if (apiKey) document.getElementById('apiKey').value = apiKey;
        
        async function connect23andMe() {
            const button = document.getElementById('connect23andMe');
            button.disabled = true;
            document.getElementById('ancestry-loading').style.display = 'block';
            
            setTimeout(async () => {
                const mockAncestry = {
                    'Italy': 35.2,
                    'Ireland': 22.1,
                    'Mexico': 15.4,
                    'Greece': 12.3,
                    'Portugal': 10.0,
                    'Other': 5.0
                };
                ancestryData = mockAncestry;
                document.getElementById('ancestry-data').innerHTML = `
                    <strong>Your Coastal Ancestries:</strong><br>
                    ${Object.entries(mockAncestry).map(([country, pct]) => `${country}: ${pct}%`).join('<br>')}
                    <br><button onclick="autoSelectAncestry()">Use Top Coastal Match</button>
                `;
                document.getElementById('ancestry-data').style.display = 'block';
                document.getElementById('ancestry-loading').style.display = 'none';
                button.textContent = 'Reconnect 23andMe';
                button.disabled = false;
                showMainForm();
            }, 2000);
        }
        
        function autoSelectAncestry() {
            const topCountry = Object.entries(ancestryData).reduce((a, b) => a[1] > b[1] ? a : b)[0].toLowerCase();
            document.getElementById('ancestry').value = topCountry;
        }
        
        function showMainForm() {
            document.getElementById('onboarding').style.display = 'none';
            document.getElementById('api-key-section').style.display = 'block';
            document.getElementById('matchForm').style.display = 'block';
        }
        
        function setApiKey() {
            apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                localStorage.setItem('grokApiKey', apiKey);
                alert('API Key saved!');
            }
        }
        
        async function callGrokAPI(userMessage) {
            if (!apiKey) return 'Please set your Grok API key.';
            try {
                const response = await fetch('https://api.x.ai/v1/chat/completions', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${apiKey}`, 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'grok-3-mini',
                        messages: [
                            { role: 'system', content: 'You are BoomerZion.ai, helping retirees find affordable coastal properties near airports in their ancestral lands. Recommend beachfront or near-coast properties within 1 hour of an international airport, emphasizing low cost, lifestyle, and practical tips. Keep it vibrant, concise, and actionable.' },
                            { role: 'user', content: userMessage }
                        ],
                        max_tokens: 300,
                        temperature: 0.7
                    })
                });
                if (!response.ok) throw new Error(`API Error: ${response.status}`);
                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                return `Grok API failed: ${error.message}`;
            }
        }
        
        document.getElementById('matchForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const age = document.getElementById('age').value;
            const netWorth = document.getElementById('netWorth').value;
            let ancestry = document.getElementById('ancestry').value;
            if (!ancestry && Object.keys(ancestryData).length > 0) {
                ancestry = Object.entries(ancestryData).reduce((a, b) => a[1] > b[1] ? a : b)[0].toLowerCase();
                document.getElementById('ancestry').value = ancestry;
            }
            const preferences = document.getElementById('preferences').value || 'Beachfront, near airport, affordable.';
            
            // Coastal matches near airports
            let matches = [];
            if (ancestry === 'italy') matches = ['Amalfi Coast Cottage, 45min from Naples Airport - $650,000', 'Sardinia Beach Condo, 30min from Cagliari Airport - $400,000'];
            else if (ancestry === 'ireland') matches = ['Galway Bay Home, 50min from Shannon Airport - $500,000', 'Cork Coastal Flat, 20min from Cork Airport - $350,000'];
            else if (ancestry === 'mexico') matches = ['Puerto Vallarta Beachfront, 15min from PVR Airport - $300,000', 'Cancun Condo, 20min from CUN Airport - $250,000'];
            else if (ancestry === 'greece') matches = ['Crete Coastal Villa, 25min from Chania Airport - $450,000', 'Athens Riviera Apartment, 30min from ATH Airport - $320,000'];
            else if (ancestry === 'portugal') matches = ['Algarve Beach House, 30min from Faro Airport - $400,000', 'Lisbon Coast Condo, 25min from LIS Airport - $380,000'];
            else matches = ['Custom Coastal Match: Let Grok find your shore!'];
            
            document.getElementById('matches').innerHTML = matches.map(m => `<div class="match">${m}</div>`).join('');
            
            const userMessage = `I'm ${age} with $${netWorth}, ancestry: ${ancestry} (${JSON.stringify(ancestryData)}). Want affordable coastal property near an airport. Preferences: ${preferences}. Recommend spots, costs, tips.`;
            const grokResponse = await callGrokAPI(userMessage);
            document.getElementById('grok-response').innerHTML = `<strong>Grok's Coastal Advice:</strong><br>${grokResponse}`;
            
            document.getElementById('results').style.display = 'block';
        });
        
        async function getOpendoorOffer() {
            const address = document.getElementById('address').value;
            if (!address) return alert('Enter an address!');
            const resultsDiv = document.getElementById('opendoor-results');
            resultsDiv.innerHTML = '<p>Fetching your offer...</p>';
            setTimeout(() => {
                const mockOffer = '$450,000 Cash Offer (Estimated)';
                resultsDiv.innerHTML = `
                    <strong>${mockOffer}</strong><br>
                    <a href="https://www.opendoor.com/sell?address=${encodeURIComponent(address)}" target="_blank">View Full Offer on Opendoor</a><br>
                    <small>Close fast, fund your coastal dream!</small>
                `;
            }, 1500);
        }
    </script>
</body>
</html>